@HEADER-COMMENT@

@HEADER@
BuildRequires:	boost-devel gcc-c++ libldapcpp-devel perl-Digest-SHA1 perl-gettext perl-X500-DN pkg-config update-desktop-files yast2 yast2-core-devel yast2-devtools yast2-ldap-client
Requires:	acl net-tools perl perl-Digest-SHA1 perl-gettext perl-X500-DN yast2 yast2-ca-management yast2-ldap-client yast2-perl-bindings yast2-users libldapcpp1 >= 0.3.0
Summary:	Configuration of the OpenLDAP server

%description
-

%package -n yast2-openldap-mirrormode
Summary:        YaST2 module to manage OpenLDAP MirrorMode nodes
Group:          System/YaST
Requires:       yast2-ldap-server >= 2.17.40

%description -n yast2-openldap-mirrormode
The YaST2 component to add and remove nodes to an OpenLDAP MirrorMode setup

@PREP@

@BUILD@

@INSTALL@
rm -f $RPM_BUILD_ROOT/@plugindir@/libpy2ag_slapdconfig.la
rm -f $RPM_BUILD_ROOT/@plugindir@/libpy2ag_slapdconfig.so

@CLEAN@

%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig

%files
%defattr(-,root,root)
%dir @yncludedir@/ldap-server
%dir @moduledir@/YaPI
@yncludedir@/ldap-server/complex.ycp
@yncludedir@/ldap-server/dialogs.ycp
@yncludedir@/ldap-server/helps.ycp
@yncludedir@/ldap-server/tree_structure.ycp
@yncludedir@/ldap-server/widgets.ycp
@yncludedir@/ldap-server/wizards.ycp
@clientdir@/ldap-server.ycp
@clientdir@/ldap-server_*.ycp
@moduledir@/LdapServer.*
@moduledir@/LdapDatabase.*
@moduledir@/YaPI/LdapServer.pm
@desktopdir@/ldap-server.desktop
@plugindir@/libpy2ag_slapdconfig.*
@schemadir@/autoyast/rnc/ldap-server.rnc
@scrconfdir@/*
@ybindir@/ldap-server-ssl-check
%doc @docdir@

%files -n yast2-openldap-mirrormode
%defattr(-,root,root)
@yncludedir@/ldap-server/mirrormode-wizard.ycp
@clientdir@/openldap-mirrormode.ycp
@desktopdir@/openldap-mirrormode.desktop
